.agent-message {
    margin: 0;
    padding: 1;
    border: wide #313244;
    background: #181825;
    color: #cdd6f4;
}

.agent-tool-message {
    margin: 0;
    padding: 1;
    border: wide #313244;
    background: #181825;
    color: #cdd6f4;
}

.tool-title {
    color: #cdd6f4;
}

.tool-content {
    color: #585b70;
    text-style: italic;
}

/* Tool message containers */
.agent-tool-message {
    width: auto;
    height: auto;
}

/* Prevent Vertical containers in tool messages from expanding unnecessarily */
.agent-tool-message > Vertical {
    height: auto;
}

/* Horizontal containers for tool messages */
.tool-horizontal {
    width: auto;
    height: auto;
}

/* Current todo list sizing */
.current-todo-list {
    width: auto;
}

/* Code markdown display - override defaults */
.code-markdown {
    height: auto;
    overflow-y: hidden;  /* No scrolling on the Markdown widget itself */
    background: transparent;  /* Transparent background */
    padding: 0 2 0 2;  /* Remove bottom padding, keep horizontal */
}

/* Override MarkdownFence's default max-height limit and background */
.code-markdown MarkdownFence {
    max-height: 100vh;  /* Allow it to be as tall as needed */
    overflow: hidden;   /* No internal scrolling */
    background: transparent;  /* Force transparent background */
    margin: 0;  /* Remove top/bottom margins */
}

/* Override the Static widget inside MarkdownFence */
.code-markdown MarkdownFence > Static {
    height: auto;  /* Don't expand */
}

/* File tree display */
.file-tree {
    background: transparent;
    color: #cdd6f4;
    padding: 0 1;  /* Only horizontal padding */
    height: auto;
    width: 100%;
}

/* Search markdown display */
.search-markdown {
    height: auto;
    overflow-y: hidden;
    background: transparent;
    padding: 0 2 0 2;  /* Remove bottom padding, keep horizontal */
}

/* Override MarkdownFence for search results */
.search-markdown MarkdownFence {
    max-height: 100vh;
    overflow: hidden;
    background: transparent;
    margin: 0;  /* Remove top/bottom margins */
}

/* Override the Static widget inside search MarkdownFence */
.search-markdown MarkdownFence > Static {
    height: auto;  /* Don't expand */
}

/* File list display */
.file-list {
    background: transparent;
    color: #cdd6f4;
    padding: 1;
    height: auto;
    width: 100%;
}

/* Main container to match analysis screen */
.main-container {
    width: 100%;
    height: 100%;
    background: transparent;
    align-vertical: top;
}

/* Header styling to match analysis screen */
.header {
    width: 100%;
    height: auto;
    padding: 1 0;
    background: transparent;
    color: $text;
    text-align: center;
    text-style: bold;
    margin: 0 0 2 0;
}

/* Messages container styling */
.messages-center {
    width: 100%;
    height: 1fr;
}

/* Scrollbar styling */
.scrollbar_styles {
    scrollbar-color: #585b70;
    scrollbar-color-hover: #7f849c;
    scrollbar-color-active: #9399b2;
    scrollbar-background: #1e1e2e;
    scrollbar-background-hover: #313244;
    scrollbar-background-active: #45475a;
    scrollbar-size-vertical: 1;
    margin-right: 3;  /* Move entire container away from right edge */
}

#test-messages-container {
    width: 90;  /* Even wider container */
    height: 100%;
    background: transparent;
    border-right: solid $background;  /* Invisible border using background color */
    margin: 0;
    padding: 0;
}

/* Try targeting scrollbar widgets directly */
ScrollBar {
    margin-left: 2;
}

/* Try targeting system scrollbar components */
.-textual-system {
    margin-left: 2;
}

/* Force all content to be wider but leave space for scrollbar */
#test-messages-container .agent-tool-message {
    width: 85;  /* Wider content maintaining 5 unit scrollbar spacing */
    max-width: 85;
}

/* Also constrain agent messages */
#test-messages-container .agent-message {
    width: 85;  /* Wider content maintaining 5 unit scrollbar spacing */
    max-width: 85;
}

/* Bug report markdown display */
.bug-report-markdown {
    height: auto;
    overflow-y: hidden;
    background: transparent;
    padding: 0 2 0 2;  /* Remove bottom padding, keep horizontal */
}

/* Override MarkdownFence for bug reports */
.bug-report-markdown MarkdownFence {
    max-height: 100vh;
    overflow: hidden;
    background: transparent;
    margin: 0;  /* Remove top/bottom margins */
}

/* Override the Static widget inside bug report MarkdownFence */
.bug-report-markdown MarkdownFence > Static {
    height: auto;  /* Don't expand */
}

/* Loading message styling */
.loading-message {
    background: transparent;
    color: #585b70;
    text-style: italic;
    padding: 1;
    height: auto;
    text-align: center;
}

/* Rich bug report markdown display */
.clean-bug-report-markdown {
    height: auto;
    overflow-y: hidden;
    background: transparent;
    padding: 0 2 0 2;
}

/* Override MarkdownFence for rich bug reports */
.clean-bug-report-markdown MarkdownFence {
    max-height: 100vh;
    overflow: hidden;
    background: #313244;  /* Surface 0 from Catppuccin */
    border: solid #45475a;  /* Surface 1 */
    margin: 1 0;
    padding: 1;
}

/* Override the Static widget inside clean bug report MarkdownFence */
.clean-bug-report-markdown MarkdownFence > Static {
    height: auto;
    color: #a6e3a1;  /* Green for code */
}

/* Rich styling for different elements */
.clean-bug-report-markdown MarkdownParagraph {
    color: #cdd6f4;  /* Text */
    margin: 0 0 1 0;
}


/* Header styling with Catppuccin colors */
.clean-bug-report-markdown MarkdownH2 {
    color: #94e2d5;  /* Catppuccin Teal - sub headings */
    text-style: bold;
    margin: 2 0 1 0;
}

.clean-bug-report-markdown MarkdownH3 {
    color: #cdd6f4;  /* Normal text color */
    text-style: bold;
    margin: 1 0 1 0;
}

/* Additional bug report styling */
.clean-bug-report-markdown MarkdownH4 {
    color: #cdd6f4;  /* Normal text color */
    text-style: bold;
    margin: 1 0 0 0;
}

/* Enhance bullet list readability */
.clean-bug-report-markdown MarkdownBulletList,
.clean-bug-report-markdown MarkdownOrderedList {
    color: #cdd6f4;  /* Text */
    margin: 0;
    padding: 0 0 0 1;
}

/* Tighter spacing for bullet list items */
.clean-bug-report-markdown MarkdownUnorderedListItem,
.clean-bug-report-markdown MarkdownOrderedListItem {
    margin: 0;
    padding: 0;
}

/* Table styling */
.clean-bug-report-markdown MarkdownTable {
    border: solid #45475a;
    background: #1e1e2e;  /* Base */
    margin: 1 0;
}

.clean-bug-report-markdown MarkdownTHead {
    background: #313244;  /* Surface 0 */
    color: #cba6f7;  /* Mauve for headers */
    text-style: bold;
}

.clean-bug-report-markdown MarkdownTH,
.clean-bug-report-markdown MarkdownTD {
    border: solid #45475a;
    padding: 0 1;
    color: #cdd6f4;  /* Text */
}

/* Blockquote styling */
.clean-bug-report-markdown MarkdownBlockQuote {
    border-left: solid #585b70;  /* Subtle border */
    background: transparent;
    color: #cdd6f4;  /* Normal text color */
    padding: 0 0 0 2;
    margin: 1 0;
}

/* Horizontal rule styling */
.clean-bug-report-markdown MarkdownHorizontalRule {
    border-bottom: heavy #45475a;  /* Surface 1 - subtle gray */
    margin: 1 0;
}

/* Code inline styling */
.clean-bug-report-markdown MarkdownInlineCode {
    background: #313244;  /* Surface 0 */
    color: #94e2d5;  /* Teal */
    padding: 0 1;
}

/* List styling */
.clean-bug-report-markdown MarkdownBulletList,
.clean-bug-report-markdown MarkdownOrderedList {
    color: #cdd6f4;  /* Text */
    margin: 0 0 1 0;
}

/* Links (if any) */
.clean-bug-report-markdown MarkdownLink {
    color: #74c7ec;  /* Sapphire */
    text-style: underline;
}

/* Bug report component styling */
.bug-report-header {
    height: auto;
    background: transparent;
}

.bug-report-title {
    color: #cba6f7;  /* Catppuccin Mauve - main header */
    text-style: bold;
    text-align: center;
    background: transparent;
    height: auto;
    margin: 0;
    padding: 0;
}

.bug-report-stats-container {
    height: auto;
    background: transparent;
    margin: 0;
}

.bug-report-stats {
    color: #a6adc8;  /* Subtext 0 - muted */
    text-align: center;
    background: transparent;
    height: auto;
    margin: 0;
    padding: 0;
}

.bug-report-content {
    height: auto;
    background: transparent;
}